<%- model_class = Item -%>
<section>
  <div class="page-header">
    <h1><%=t '.title', :default => model_class.model_name.human.pluralize.titleize %></h1>
  </div>
  <table class="table table-striped">
    <thead>
      <tr>
        <th><%= model_class.human_attribute_name(:id) %></th>
        <th><%= model_class.human_attribute_name(:image_url) %></th>
        <th><%= model_class.human_attribute_name(:title) %></th>
        <th><%= model_class.human_attribute_name(:quantity) %></th>
        <th><%= model_class.human_attribute_name(:starting_price) %></th>
        <th><%= model_class.human_attribute_name(:quality) %></th>
        <th><%= model_class.human_attribute_name(:rarity) %></th>
        <th><%= model_class.human_attribute_name(:item_type) %></th>
        <th><%= model_class.human_attribute_name(:hero) %></th>
        <th><%=t '.actions', :default => t("helpers.actions") %></th>
      </tr>
    </thead>
    <tfoot>
      <tr>
        <th colspan="10" class="ts-pager form-horizontal">
          <button type="button" class="btn first"><i class="icon-step-backward glyphicon glyphicon-step-backward"></i></button>
          <button type="button" class="btn prev"><i class="icon-arrow-left glyphicon glyphicon-backward"></i></button>
          <span class="pagedisplay"></span> <!-- this can be any element, including an input -->
          <button type="button" class="btn next"><i class="icon-arrow-right glyphicon glyphicon-forward"></i></button>
          <button type="button" class="btn last"><i class="icon-step-forward glyphicon glyphicon-step-forward"></i></button>
          <select class="pagesize input-mini" title="Select page size">
            <option selected="selected" value="25">25</option>
            <option value="50">50</option>
            <option value="75">75</option>
            <option value="100">100</option>
          </select>
          <select class="pagenum input-mini" title="Select page number"></select>
        </th>
      </tr>
    </tfoot>
    <tbody>
      <% @items.each do |item| %>
        <tr>
          <td><%= link_to item.id, item_path(item) %></td>
          <td><%= image_tag item.image_url %></td>
          <td><%= item.title %></td>
          <td><%= item.quantity %></td>
          <td><%= item.starting_price.format(with_currency: true) %></td>
          <td><%= item.quality %></td>
          <td><%= item.rarity %></td>
          <td><%= item.item_type %></td>
          <td><%= item.hero %></td>
          <td><%= link_to "See on STEAM", item.url %></td>
        </tr>
      <% end %>
    </tbody>
  </table>

  
</section>

<script>
  $(function() {

    $.extend($.tablesorter.themes.bootstrap, {
      // these classes are added to the table. To see other table classes available,
      // look here: http://twitter.github.com/bootstrap/base-css.html#tables
      table      : 'table table-bordered',
      caption    : 'caption',
      header     : 'bootstrap-header', // give the header a gradient background
      footerRow  : '',
      footerCells: '',
      icons      : '', // add "icon-white" to make them white; this icon class is added to the <i> in the header
      sortNone   : 'bootstrap-icon-unsorted',
      sortAsc    : 'icon-chevron-up glyphicon glyphicon-chevron-up',     // includes classes for Bootstrap v2 & v3
      sortDesc   : 'icon-chevron-down glyphicon glyphicon-chevron-down', // includes classes for Bootstrap v2 & v3
      active     : '', // applied when column is sorted
      hover      : '', // use custom css here - bootstrap class may not override it
      filterRow  : '', // filter row class
      even       : '', // odd row zebra striping
      odd        : ''  // even row zebra striping
    });

    // call the tablesorter plugin and apply the uitheme widget
    $("table").tablesorter({
      // this will apply the bootstrap theme if "uitheme" widget is included
      // the widgetOptions.uitheme is no longer required to be set
      theme : "bootstrap",

      widthFixed: true,

      headerTemplate : '{content} {icon}', // new in v2.7. Needed to add the bootstrap icon!

      // widget code contained in the jquery.tablesorter.widgets.js file
      // use the zebra stripe widget if you plan on hiding any rows (filter widget)
      widgets : [ "uitheme", "filter", "zebra" ],

      widgetOptions : {
        // using the default zebra striping class name, so it actually isn't included in the theme variable above
        // this is ONLY needed for bootstrap theming if you are using the filter widget, because rows are hidden
        zebra : ["even", "odd"],

        // reset filters button
        filter_reset : ".reset"

        // set the uitheme widget to use the bootstrap theme class names
        // this is no longer required, if theme is set
        // ,uitheme : "bootstrap"

      }
    }).tablesorterPager({

      // target the pager markup - see the HTML block below
      container: $(".ts-pager"),

      // target the pager page select dropdown - choose a page
      cssGoto  : ".pagenum",

      // remove rows from the table to speed up the sort of large tables.
      // setting this to false, only hides the non-visible rows; needed if you plan to add/remove rows with the pager enabled.
      removeRows: false,

      // output string - default is '{page}/{totalPages}';
      // possible variables: {page}, {totalPages}, {filteredPages}, {startRow}, {endRow}, {filteredRows} and {totalRows}
      output: '{startRow} - {endRow} / {filteredRows} ({totalRows})'
    
    });

  });
</script>